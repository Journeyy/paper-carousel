
<link rel="import" href="../polymer/polymer.html"/>
<link rel="import" href="../iron-icons/image-icons.html"/>
<link rel="import" href="../iron-resizable-behavior/iron-resizable-behavior.html"/>
<link rel="import" href="../paper-styles/color.html"/>
<dom-module id="paper-carousel">
  <template>
    <style>:host{display:block;position:relative;overflow:hidden;--dot-background-color:#ffffff;--dot-active-extra-item:hidden}:host::content .paper-carousel_wrapper{text-align:center;position:relative;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-flow:row nowrap;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-webkit-justify-content:space-around;-ms-flex-pack:distribute;justify-content:space-around;-webkit-align-items:flex-start;-ms-flex-align:start;align-items:flex-start;-webkit-align-content:flex-start;-ms-flex-line-pack:start;align-content:flex-start;width:100%;z-index:1;transition:-webkit-transform .5s ease-in-out;transition:transform .5s ease-in-out;transition:transform .5s ease-in-out,-webkit-transform .5s ease-in-out;-ms-touch-action:pan-y;touch-action:pan-y;will-change:transform}:host::content .paper-carousel_controls{position:absolute;width:auto;top:50%;right:10px;left:10px;-webkit-transform:translateY(-50%);transform:translateY(-50%);text-align:center;z-index:1;pointer-events:none}:host::content [class*=paper-carousel_controls_arrow]{color:var(--dot-background-color);pointer-events:auto}:host::content [class*=paper-carousel_controls_arrow].paper-carousel_controls_arrow--disabled{pointer-events:none;cursor:default}:host::content [class*=paper-carousel_controls_arrow] iron-icon{opacity:var(--light-secondary-opacity);-webkit-filter:drop-shadow(0 0 1px rgba(0, 0, 0, .4));filter:drop-shadow(0 0 1px rgba(0, 0, 0, .4));-webkit-backface-visibility:hidden;backface-visibility:hidden;-webkit-transform:scale(1);transform:scale(1);transition:opacity .2s ease-out,-webkit-filter .2s ease-out,-webkit-transform .2s ease-out;transition:opacity .2s ease-out,filter .2s ease-out,transform .2s ease-out;transition:opacity .2s ease-out,filter .2s ease-out,transform .2s ease-out,-webkit-filter .2s ease-out,-webkit-transform .2s ease-out}:host::content [class*=paper-carousel_controls_arrow] iron-icon:hover{opacity:var(--light-primary-opacity);-webkit-transform:scale(1.15);transform:scale(1.15);-webkit-filter:drop-shadow(0 2px 2px rgba(0, 0, 0, .4));filter:drop-shadow(0 2px 2px rgba(0, 0, 0, .4))}:host::content .paper-carousel_controls_arrow-next{float:right}:host::content .paper-carousel_controls_arrow-prev{float:left}:host::content .paper-carousel_dots_wrapper{position:relative;display:inline-block;margin:0;padding:0;z-index:2}:host::content .paper-carousel_dots{position:absolute;width:100%;text-align:center;z-index:1;bottom:10px;pointer-events:none}:host::content .paper-carousel_dot-line{visibility:var(--dot-active-extra-item);position:absolute;top:0;padding:6px;z-index:2;pointer-events:none;transition:-webkit-transform .2s ease-in-out;transition:transform .2s ease-in-out;transition:transform .2s ease-in-out,-webkit-transform .2s ease-in-out}:host::content .paper-carousel_dot-line::before{content:'';display:block;width:10px;height:10px;background-color:var(--color-red);border-radius:10px}:host::content .paper-carousel_dot{display:inline-block;pointer-events:auto;opacity:var(--light-secondary-opacity);-webkit-filter:drop-shadow(0 0 2px rgba(0, 0, 0, .4));filter:drop-shadow(0 0 2px rgba(0, 0, 0, .4));-webkit-transform-origin:center;transform-origin:center;-webkit-transform:scale(1);transform:scale(1);transition:opacity .6s cubic-bezier(.25,.8,.25,1),-webkit-transform .6s cubic-bezier(.25,.8,.25,1),-webkit-filter .6s cubic-bezier(.25,.8,.25,1);transition:transform .6s cubic-bezier(.25,.8,.25,1),opacity .6s cubic-bezier(.25,.8,.25,1),filter .6s cubic-bezier(.25,.8,.25,1);transition:transform .6s cubic-bezier(.25,.8,.25,1),opacity .6s cubic-bezier(.25,.8,.25,1),filter .6s cubic-bezier(.25,.8,.25,1),-webkit-transform .6s cubic-bezier(.25,.8,.25,1),-webkit-filter .6s cubic-bezier(.25,.8,.25,1);-webkit-backface-visibility:hidden;backface-visibility:hidden}:host::content .paper-carousel_dot.active{opacity:var(--light-primary-opacity);-webkit-filter:drop-shadow(0 1px 3px rgba(0, 0, 0, .4));filter:drop-shadow(0 1px 3px rgba(0, 0, 0, .4));-webkit-transform:scale(1.15);transform:scale(1.15)}:host::content .paper-carousel_dot a{position:relative;display:block;padding:6px;color:var(--dot-background-color);font-size:.8125em;line-height:2em;font-weight:400;text-decoration:none}:host::content .paper-carousel_dot a::before{content:'';display:block;width:8px;height:8px;background-color:var(--dot-background-color);border-radius:8px}:host::content [class*=paper-carousel-demo]{position:relative;height:400px}:host::content [class*=paper-carousel-demo]::before{position:absolute;content:attr(data-text);color:var(--dot-background-color);font-size:3rem;font-weight:700;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}:host::content .paper-carousel-demo-indigo{background-color:var(--paper-indigo-500)}:host::content .paper-carousel-demo-pink{background-color:var(--paper-pink-500)}:host::content .paper-carousel-demo-teal{background-color:var(--paper-teal-500)}:host::content .paper-carousel-demo-amber{background-color:var(--paper-amber-500)}:host::content .paper-carousel-demo-green{background-color:var(--paper-green-500)}:host::content .paper-carousel-demo-blue{background-color:var(--paper-blue-500)}</style>
    <div class="paper-carousel_wrapper">
      <content></content>
    </div>
  </template>
  <script>(function(){Polymer({is:"paper-carousel",behaviors:[Polymer.IronResizableBehavior],listeners:{"iron-resize":"_onResize"},items:function(){var t,e,o,i,s,r;if(i=this,s=i.getBoundingClientRect(),null!==i.getAttribute("responsive"))for(o=i.getAttribute("responsive").replace(/\s/g,"").split(","),e=0;e<o.length;){if(t=o[e].split(":"),r=o[e+1]?o[e+1].split(":"):{0:0},s.width<=t[0]&&s.width>r[0])return t[1];e++}return null!==i.getAttribute("items")?i.getAttribute("items"):1},_dotText:function(){var t,e;return t=this,e=t.getAttribute("dotText"),null===e||"false"!==e},_isLoop:function(){var t,e;return t=this,e=t.getAttribute("loop"),null!==e&&"true"===e},getTotalItems:function(){var t,e,o,i,s,r,n,a,l,h;if(r=this,n=r.querySelector(".paper-carousel_wrapper"),h=0,r._isLoop())for(a=n.children,e=0,i=a.length;e<i;e++)t=a[e],"template"===t.localName||t.classList.contains("cloned")||h++;else for(l=n.children,o=0,s=l.length;o<s;o++)t=l[o],"template"!==t.localName&&h++;return h},_getRealTotalItems:function(){var t,e,o,i,s,r,n;for(i=this,s=i.querySelector(".paper-carousel_wrapper"),n=0,r=s.children,e=0,o=r.length;e<o;e++)t=r[e],"template"!==t.localName&&n++;return n},getPages:function(){var t,e,o,i;for(e=this,t=1,o=[],i=[];t<=this.getTotalItems();)o.push(t-1),t%this.items()===0&&(i.push(o),o=[]),t===this.getTotalItems()&&i.push(o),t++;return i},getTotalPages:function(){var t;return t=this,Math.ceil(this.getTotalItems()/this.items())},getContainerPosition:function(){var t,e,o,i,s;return t=this,e=t.querySelector(".paper-carousel_wrapper"),o=e.style.transform,s=0,""!==o&&(i=o.match(/translateX\((.*)/)[0],s=i.match(/\((.*)\)/)[0],s=s.substr(1,s.length-2),s=parseFloat(s)),s},getCurrentItem:function(){var t,e,o,i;if(i=this,e=Math.round(100/this.getTotalItems()*1e3)/1e3,o=Math.round(100/this._getRealTotalItems()*1e3)/1e3,t=0,this._isLoop)for(;t<=this._getRealTotalItems();){if(Math.round(o*t*1e3)/1e3===-this.getContainerPosition())return i.currentItem=t-this.itemsToPrepend.length,t-this.itemsToPrepend.length;t++}else for(;t<=this.getTotalItems();){if(Math.round(e*t*1e3)/1e3===-this.getContainerPosition())return i.currentItem=t,t;t++}},goToItem:function(t){var e,o,i,s;return o=this,i=o.querySelector(".paper-carousel_wrapper"),this._isLoop()?(e=Math.round(100/this._getRealTotalItems()*1e3)/1e3,s=Math.round((t+this.itemsToPrepend.length)*-e*1e3)/1e3):(e=Math.round(100/this.getTotalItems()*1e3)/1e3,s=Math.round(t*-e*1e3)/1e3),this._isLoop()?i.style.transform="translateX("+s+"%)":t<this.getTotalItems()&&t>=0&&this.items()<this.getTotalItems()&&(i.style.transform="translateX("+s+"%)"),this._setActiveDot(this.getCurrentPage()),this._setDisabledControls()},goToNextItem:function(){var t,e,o,i;if(o=this,i=o.querySelector(".paper-carousel_wrapper"),t=Math.round(100/this.getTotalItems()*1e3)/1e3,e=Math.round(100/this._getRealTotalItems()*1e3)/1e3,this._isLoop()){if(this.goToItem(this.getCurrentItem()+1),this.getCurrentItem()===this.getTotalItems())return i.style.transition="none",this.goToItem(-1),i.style.transition="",this.goToItem(0)}else if(this.getContainerPosition()>-(this.getTotalItems()-this.items()-1)*t-5)return this.goToItem(this.getCurrentItem()+1)},goToPrevItem:function(){var t,e,o,i;if(o=this,i=o.querySelector(".paper-carousel_wrapper"),t=Math.round(100/this.getTotalItems()*1e3)/1e3,e=Math.round(100/this._getRealTotalItems()*1e3)/1e3,this._isLoop){if(this.goToItem(this.getCurrentItem()-1),this.getCurrentItem()===-1)return i.style.transition="none",this.goToItem(this.getTotalItems()),i.style.transition="",this.goToItem(this.getTotalItems()-1)}else if(this.getContainerPosition()<0)return this.goToItem(this.getCurrentItem()-1)},getCurrentPage:function(){var t,e,o,i,s;for(t=Math.round(100/this.getTotalItems()*1e3)/1e3,s=t*this.items(),i=0;i<this.getPages().length;){if(o=this.getPages()[i],e=parseFloat(this.getCurrentItem())+parseFloat(this.items()),e>=this.getTotalItems())return this._isLoop()||this.goToPage(this.getTotalPages()-1),this.getTotalPages()-1;if(o.indexOf(this.getCurrentItem())!==-1)return i;i++}},goToPage:function(t){var e,o,i,s,r,n,a,l,h;return i=this,s=i.querySelector(".paper-carousel_wrapper"),e=Math.round(100/this.getTotalItems()*1e3)/1e3,o=Math.round(100/this._getRealTotalItems()*1e3)/1e3,l=(this.items()-this.getPages()[t].length)*e,h=(this.items()-this.getPages()[t].length)*o,n=-e*this.items(),a=-o*this.items(),r=this._isLoop()?Math.round(1e3*(t*a+h))/1e3+a:Math.round(1e3*(t*n+l))/1e3,this._isLoop()?s.style.transform="translateX("+r+"%)":t<this.getTotalPages()&&t>=0&&this.items()<this.getTotalItems()&&(s.style.transform="translateX("+r+"%)"),this._setActiveDot(t),this._setDisabledControls()},goToNextPage:function(){var t;if(t=Math.round(100/this.getTotalItems()*1e3)/1e3,this.getContainerPosition()>-(this.getTotalItems()-this.items()-1)*t-5)return this.goToPage(this.getCurrentPage()+1)},goToPrevPage:function(){var t;if(t=Math.round(100/this.getTotalItems()*1e3)/1e3,this.getContainerPosition()<-5)return this.goToPage(this.getCurrentPage()-1)},_setContainerSize:function(){var t,e,o,i,s,r,n,a,l;for(r=this,a=r.querySelector(".paper-carousel_wrapper"),n=r.getBoundingClientRect(),o=this._isLoop()?n.width*r._getRealTotalItems()/this.items():n.width*r.getTotalItems()/this.items(),e=Math.round(100/this.getTotalItems()*1e4)/1e4,l=a.children,i=0,s=l.length;i<s;i++)t=l[i],"template"!==t.localName&&(t.style.width=e+"%");return a.style.minWidth=o+"px"},_setActiveDot:function(t){var e,o,i,s;for(s=this,o=s.querySelectorAll(".paper-carousel_dot"),e=s.querySelector(".paper-carousel_dot-line"),i=0;i<o.length;)i===parseInt(t)?o[t].classList.add("active"):o[i].classList.remove("active"),i++;if(e&&this.items()<this.getTotalItems())return e.style.transform="translateX("+t+"00%)"},_printControls:function(t){var e,o,i,s,r,n,a,l;if(s=this,i=1,"false"!==s.getAttribute("controls")&&(t===!0||s.tpages!==this.items()))return s.querySelector(".paper-carousel_controls")&&s.querySelector(".paper-carousel_controls").remove(),e=document.createElement("div"),e.classList.add("paper-carousel_controls"),o=document.createElement("div"),o.classList.add("paper-carousel_controls_wrapper"),r=document.createElement("a"),n=document.createElement("iron-icon"),null!==s.getAttribute("nextIcon")?n.setAttribute("icon",s.getAttribute("nextIcon")):n.setAttribute("icon","image:navigate-next"),a=document.createElement("a"),l=document.createElement("iron-icon"),null!==s.getAttribute("prevIcon")?l.setAttribute("icon",s.getAttribute("prevIcon")):l.setAttribute("icon","image:navigate-before"),r.setAttribute("href",""),r.classList.add("paper-carousel_controls_arrow-next"),a.setAttribute("href",""),a.classList.add("paper-carousel_controls_arrow-prev"),r.addEventListener("click",function(t){return t.preventDefault()}),a.addEventListener("click",function(t){return t.preventDefault()}),s.listen(r,"tap","goToNextItem"),s.listen(a,"tap","goToPrevItem"),Polymer.dom(r).appendChild(n),Polymer.dom(a).appendChild(l),Polymer.dom(e).appendChild(o),Polymer.dom(o).appendChild(a),Polymer.dom(o).appendChild(r),this.getTotalPages()>1&&Polymer.dom(s.root).appendChild(e),this._setDisabledControls()},_setDisabledControls:function(t){var e,o,i,s,r;if(r=this,i=Math.round(100/this.getTotalItems()*1e3)/1e3,s=Math.round(100/this._getRealTotalItems()*1e3)/1e3,e=r.querySelector(".paper-carousel_controls_arrow-prev"),o=r.querySelector(".paper-carousel_controls_arrow-next"),!this._isLoop()&&null!==o&&null!==e)return this.getContainerPosition()>-.5?e.classList.add("paper-carousel_controls_arrow--disabled"):e.classList.remove("paper-carousel_controls_arrow--disabled"),this.getContainerPosition()<-(this.getTotalItems()-this.items()-1)*i?o.classList.add("paper-carousel_controls_arrow--disabled"):o.classList.remove("paper-carousel_controls_arrow--disabled")},_printDots:function(t){var e,o,i,s,r,n,a;if(a=this,n=1,"false"!==a.getAttribute("dots")){if(s=document.createElement("div"),s.classList.add("paper-carousel_dots"),r=document.createElement("ul"),r.classList.add("paper-carousel_dots_wrapper"),Polymer.dom(s).appendChild(r),t!==!0){if(a.tpages===this.items())return;a.tpages=this.items()}for(a.querySelector(".paper-carousel_dots")&&a.querySelector(".paper-carousel_dots").remove();n<=this.getTotalPages();)o=document.createElement("li"),o.classList.add("paper-carousel_dot"),i=document.createElement("a"),i.setAttribute("href",""),i.setAttribute("data-rel",n-1),a.clickDotsEvent=function(t){var e;return e=t.target.getAttribute("data-rel"),this.goToPage(e)},i.addEventListener("click",function(t){return t.preventDefault()}),a.listen(i,"tap","clickDotsEvent"),this._dotText()===!0&&(i.textContent=n),e=document.createElement("li"),e.classList.add("paper-carousel_dot-line"),Polymer.dom(o).appendChild(i),Polymer.dom(r).appendChild(o),n===this.getTotalPages()&&Polymer.dom(r).appendChild(e),n++;return this.getTotalPages()>1&&Polymer.dom(a.root).appendChild(s),this._setActiveDot(this.getCurrentPage())}},_getDragState:function(t){var e,o,i,s,r,n,a,l,h,u,c,g,m,d,p,f,T,_,I;switch(u=this,c=u.querySelector(".paper-carousel_wrapper"),g=c.getBoundingClientRect(),m=Math.round(100*t.detail.dx/g.width*1e3)/1e3,r=Math.round(100/this.getTotalItems()*1e3)/1e3,n=Math.round(100/this._getRealTotalItems()*1e3)/1e3,l=Math.round(r*(this.getTotalItems()-this.items())*1e3)/1e3,h=Math.round(n*(this._getRealTotalItems()-this.items())*1e3)/1e3,i=0,I=t.detail.dx,t.detail.state){case"start":return u.startTime=(new Date).getTime(),u.dragPosition=this.getContainerPosition(),window.touching=!0,c.style.transitionDuration="0s",window.addEventListener("scroll",function(){return clearInterval(window.scrollingInterval),window.scrolling=!0,window.touchScroll=!0,window.scrollingInterval=setTimeout(function(){if(window.scrolling=!1,window.touching===!1)return window.touchScroll=!1},50)});case"track":return p=Math.round(1e3*(u.dragPosition+m))/1e3,p=Math.min(p,0),p=this._isLoop()?Math.max(p,-h):Math.max(p,-l),window.scrolling===!1&&window.touchScroll===!1&&(I>2||I<-2)&&(this.items()<this.getTotalItems()&&window.movingCarousel===!0&&(c.style.transform="translateX("+p+"%) translateY(0) translateZ(0)"),window.movingCarousel=!0),window.addEventListener("touchmove",function(t){if(window.movingCarousel===!0)return t.preventDefault()});case"end":if(i=(new Date).getTime(),_=i-u.startTime,a=Math.max(Math.min(_,500),100),s=this._isLoop()?-1:0,this.getContainerPosition()>-5&&(a=500),this._isLoop()?this.getContainerPosition()<-(this._getRealTotalItems()-this.items())*r+5&&(a=500):this.getContainerPosition()<-(this.getTotalItems()-this.items())*r+5&&(a=500),I<30&&I>-30&&(a=500),c.style.transitionDuration=a+"ms",u.resetTransition=function(){return u._isLoop()&&(u.getCurrentItem()===u.getTotalItems()&&(c.style.transition="none",u.goToItem(0),c.style.transition=""),this.getCurrentItem()===-1&&(c.style.transition="none",this.goToItem(this.getTotalItems()-1),c.style.transition="")),c.style.transitionDuration=""},u.listen(c,"transitionend","resetTransition"),window.scrolling===!1&&window.touchScroll===!1&&(I>2||I<-2))if(this._isLoop())for(;s<this._getRealTotalItems();)f=-Math.round(n*(s+this.itemsToPrepend.length)*1e3)/1e3,e=-Math.round(n*(s+this.itemsToPrepend.length+1)*1e3)/1e3,d=Math.round(1e3*(f-e))/1e3,o=e+d/2,T=f-d/2,m<0&&_<150&&this.getContainerPosition()<f&&this.getContainerPosition()>=e&&this.goToItem(s+1),m>0&&_<150&&this.getContainerPosition()<f&&this.getContainerPosition()>=e&&this.goToItem(s),this.getContainerPosition()<f&&this.getContainerPosition()>=o&&this.goToItem(s),this.getContainerPosition()<T&&this.getContainerPosition()>=e&&this.goToItem(s+1),s++;else for(;s<this.getTotalItems();)f=-Math.round(r*s*1e3)/1e3,e=-Math.round(r*(s+1)*1e3)/1e3,d=Math.round(1e3*(f-e))/1e3,o=e+d/2,T=f-d/2,m<0&&_<150&&this.getContainerPosition()<f&&this.getContainerPosition()>=e&&this.goToItem(s+1),m>0&&_<150&&this.getContainerPosition()<f&&this.getContainerPosition()>=e&&this.goToItem(s),this.getContainerPosition()<f&&this.getContainerPosition()>=o&&this.goToItem(s),this.getContainerPosition()<T&&this.getContainerPosition()>=e&&this.goToItem(s+1),s++;return window.movingCarousel=!1,window.touchScroll=!1,window.touching=!1}},_loop:function(){var t,e,o,i,s;if(o=this,o._isLoop())return i=o.querySelector(".paper-carousel_wrapper"),s=0,o.itemsToAppend=[],o.itemsToPrepend=[],e=o.querySelectorAll(".paper-carousel_wrapper .cloned"),t=function(){var t;return t=[],[].forEach.call(i.children,function(e,i){var s;if(i<o.items()&&(s=e.cloneNode(!0),s.classList.add("cloned"),o.itemsToAppend.push(s)),i>=o.getTotalItems()-o.items()&&i<=o.getTotalItems())return t.push(e)}),[].forEach.call(t,function(t,e){var i;if(e<o.items())return i=t.cloneNode(!0),i.classList.add("cloned"),o.itemsToPrepend.push(i)})},e.length>0?[].forEach.call(e,function(o,i){if(o.remove(),i===e.length-1)return t()}):t(),[].forEach.call(o.itemsToAppend,function(t,e){return i.appendChild(t)}),[].forEach.call(o.itemsToPrepend.reverse(),function(t,e){return i.insertBefore(t.cloneNode(!0),i.children[0])})},_onDrag:function(){var t,e;return t=this,e=t.querySelector(".paper-carousel_wrapper"),t.listen(this.$$(".paper-carousel_wrapper"),"track","_getDragState"),e.style.touchAction=""},_setInitialPosition:function(){var t,e;return t=this,e=t.querySelector(".paper-carousel_wrapper"),e.style.transition="none",t.goToItem(0),e.style.transition=""},refresh:function(){return this._setContainerSize(),this._printControls(!0),this._printDots(!0),this._onResize()},ready:function(){return this.itemsToAppend=[],this.itemsToPrepend=[],this.listen(window,"WebComponentsReady","_onLoad")},_onLoad:function(){return this._onDrag(),this._onResize(),this._setInitialPosition()},_onResize:function(){return this._loop(),this._setContainerSize(),this._printControls(),this._printDots(),this.goToItem(this.currentItem)}})}).call(this);</script>
</dom-module>